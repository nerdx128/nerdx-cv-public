FROM --platform=linux/amd64 node:18
WORKDIR /usr/src/app
COPY . .
RUN npm install
#ENV GENERATE_SOURCEMAP=false
ENV REACT_APP_MAGIC_API_KEY=
ENV REACT_APP_DEV=production
ENV REACT_APP_INFURA_KEY=
ENV REACT_APP_WC_APP_ID=
ENV REACT_APP_ALCHEMY_API_MAINNET_KEY=
ENV REACT_APP_ALCHEMY_API_GOERLI_KEY=
ENV REACT_APP_ALCHEMY_API_SEPOLIA_KEY=
ENV REACT_APP_ALCHEMY_API_POLYGON_KEY=
ENV REACT_APP_ALCHEMY_API_MUMBAI_KEY=
#REACT_APP_API_HOST_URL=http://localhost:3100/api/
ENV REACT_APP_API_HOST_URL=
ENV REACT_APP_MOONPAY_API_KEY=
ENV REACT_APP_GCP_STORAGE_URL=
ENV REACT_APP_GOOGLE_CLIENT_ID=
ENV NODE_OPTIONS --openssl-legacy-provider
ENV NODE_OPTIONS --max-old-space-size=8192
RUN npx tailwindcss -i ./src/styles/App.css -o ./src/styles/output.css
RUN npx craco build
EXPOSE 3000
CMD [ "npx", "serve", "-s", "build" ]
